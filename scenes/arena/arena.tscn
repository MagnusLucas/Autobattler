[gd_scene load_steps=25 format=4 uid="uid://c24y8ypfrbqwp"]

[ext_resource type="TileSet" uid="uid://cmrosufv4r0kx" path="res://scenes/arena/tileset.tres" id="1_1qjuf"]
[ext_resource type="Script" uid="uid://bkkrsmssvidqb" path="res://scenes/arena/arena.gd" id="1_5tue2"]
[ext_resource type="Texture2D" uid="uid://mbxv0ayrsu3d" path="res://assets/sprites/star_particle.png" id="2_8trdl"]
[ext_resource type="AudioStream" uid="uid://dwse76yhsgxvm" path="res://assets/music/alexander_ehlers_twists.ogg" id="2_fir7s"]
[ext_resource type="PackedScene" uid="uid://ck174r8616p3u" path="res://scenes/unit/unit.tscn" id="4_aj7ud"]
[ext_resource type="Script" uid="uid://gv28uix4uroc" path="res://custom_nodes/unit_grid.gd" id="4_asdgj"]
[ext_resource type="Script" uid="uid://cqmocfnn8w674" path="res://custom_nodes/play_area.gd" id="4_jx0ua"]
[ext_resource type="Script" uid="uid://borktudwihcfo" path="res://components/tile_highlighter.gd" id="5_u52cf"]
[ext_resource type="Script" uid="uid://cg07bdaai08mp" path="res://custom_nodes/unit_mover.gd" id="8_ii07k"]
[ext_resource type="Script" uid="uid://7y5rlbikuu2c" path="res://components/scene_spawner.gd" id="11_fir7s"]
[ext_resource type="Resource" uid="uid://bk4vhb8ax4uj0" path="res://data/game_state/game_state.tres" id="11_gy0qm"]
[ext_resource type="AudioStream" uid="uid://xgrsj3clmat0" path="res://assets/sfx/unit_place.ogg" id="11_wqbss"]
[ext_resource type="Script" uid="uid://bmsmmiukuuuh3" path="res://custom_nodes/unit_spawner.gd" id="11_xgbxb"]
[ext_resource type="PackedScene" uid="uid://ckljbq0xijkfk" path="res://scenes/sell_portal/sell_portal.tscn" id="12_s83md"]
[ext_resource type="AudioStream" uid="uid://dubwbrp3e8hg3" path="res://assets/sfx/combine.ogg" id="13_8kk48"]
[ext_resource type="Resource" uid="uid://bt5jvr3qkpeth" path="res://data/player/player_stats.tres" id="13_fv88w"]
[ext_resource type="PackedScene" uid="uid://du5oqsei8s1l3" path="res://scenes/shop/shop.tscn" id="14_fv88w"]
[ext_resource type="Resource" uid="uid://chtoiyjkta42b" path="res://data/unit_pool/unit_pool.tres" id="15_w4nra"]
[ext_resource type="Script" uid="uid://cpqf6ti8iqst5" path="res://custom_nodes/unit_combiner.gd" id="16_t3vx8"]
[ext_resource type="PackedScene" uid="uid://cin6s6wgyj2rr" path="res://scenes/team_size_ui/team_size_ui.tscn" id="17_rhjlh"]
[ext_resource type="PackedScene" uid="uid://c6tnsuhttfg5f" path="res://scenes/traits/traits.tscn" id="18_tp84n"]

[sub_resource type="Curve" id="Curve_5tue2"]
_data = [Vector2(0.06842105, 0), 0.0, 0.0, 0, 0, Vector2(0.3, 1), 0.0, 0.0, 0, 0, Vector2(0.8789474, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_aj7ud"]
curve = SubResource("Curve_5tue2")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_asdgj"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(320, 1, 1)
spread = 180.0
initial_velocity_min = 20.0
initial_velocity_max = 30.0
angular_velocity_min = 19.999983
angular_velocity_max = 39.999985
gravity = Vector3(0, 0, 0)
scale_min = 0.099999994
scale_max = 0.19999999
scale_curve = SubResource("CurveTexture_aj7ud")
color = Color(1, 1, 1, 0.44313726)

[node name="Arena" type="Node2D"]
script = ExtResource("1_5tue2")
music = ExtResource("2_fir7s")
metadata/_edit_lock_ = true

[node name="Visuals" type="Node2D" parent="."]
metadata/_edit_group_ = true
metadata/_edit_lock_ = true

[node name="Background" type="TileMapLayer" parent="Visuals"]
tile_map_data = PackedByteArray("AAAAAAAAAAAAAA8AAAABAAAAAAAAAA8AAAACAAAAAAAAAA8AAAADAAAAAAAAAA8AAAAEAAAAAAAAAA8AAAAFAAAAAAAAAA8AAAAGAAAAAAAAAA8AAAAHAAAAAAAAAA8AAAAIAAAAAAAAAA8AAAAJAAAAAAAAAA8AAAAKAAAAAAAAAA8AAAALAAAAAAAAAA8AAAAMAAAAAAAAAA8AAAANAAAAAAAAAA8AAAAOAAAAAAAAAA8AAAAPAAAAAAAAAA8AAAAQAAAAAAAAAA8AAAARAAAAAAAAAA8AAAASAAAAAAAAAA8AAAATAAAAAAAAAA8AAAATAAEAAAAAAA8AAAATAAIAAAAAAA8AAAATAAMAAAAAAA8AAAATAAQAAAAAAA8AAAATAAUAAAAAAA8AAAATAAYAAAAAAA8AAAATAAcAAAAAAA8AAAATAAgAAAAAAA8AAAATAAkAAAAAAA8AAAATAAoAAAAAAA8AAAATAAsAAAAAAA8AAAASAAsAAAAAAA8AAAARAAsAAAAAAA8AAAAQAAsAAAAAAA8AAAAPAAsAAAAAAA8AAAAOAAsAAAAAAA8AAAANAAsAAAAAAA8AAAANAAoAAAAAAA8AAAANAAkAAAAAAA8AAAAMAAoAAAAAAA8AAAAMAAsAAAAAAA8AAAALAAsAAAAAAA8AAAAKAAsAAAAAAA8AAAAJAAsAAAAAAA8AAAAIAAsAAAAAAA8AAAAIAAoAAAAAAA8AAAAHAAoAAAAAAA8AAAAGAAkAAAAAAA8AAAAFAAkAAAAAAA8AAAAEAAkAAAAAAA8AAAADAAkAAAAAAA8AAAADAAoAAAAAAA8AAAACAAoAAAAAAA8AAAABAAoAAAAAAA8AAAABAAkAAAAAAA8AAAAAAAkAAAAAAA8AAAAAAAgAAAAAAA8AAAAAAAcAAAAAAA8AAAAAAAYAAAAAAA8AAAAAAAUAAAAAAA8AAAAAAAQAAAAAAA8AAAAAAAMAAAAAAA8AAAAAAAIAAAAAAA8AAAAAAAEAAAAAAA8AAAAGAAUAAAAAAA8AAAAGAAQAAAAAAA8AAAAGAAMAAAAAAA8AAAAGAAIAAAAAAA8AAAAGAAEAAAAAAA8AAAAFAAEAAAAAAA8AAAAEAAEAAAAAAA8AAAADAAEAAAAAAA8AAAACAAEAAAAAAA8AAAABAAEAAAAAAA8AAAABAAIAAAAAAA8AAAABAAMAAAAAAA8AAAABAAQAAAAAAA8AAAABAAUAAAAAAA8AAAABAAYAAAAAAA8AAAABAAcAAAAAAA8AAAABAAgAAAAAAA8AAAACAAgAAAAAAA8AAAACAAcAAAAAAA8AAAACAAYAAAAAAA8AAAACAAUAAAAAAA8AAAACAAQAAAAAAA8AAAACAAMAAAAAAA8AAAACAAIAAAAAAA8AAAADAAIAAAAAAA8AAAADAAMAAAAAAA8AAAADAAQAAAAAAA8AAAADAAUAAAAAAA8AAAADAAYAAAAAAA8AAAADAAcAAAAAAA8AAAADAAgAAAAAAA8AAAAEAAgAAAAAAA8AAAAEAAcAAAAAAA8AAAAEAAYAAAAAAA8AAAAEAAUAAAAAAA8AAAAEAAMAAAAAAA8AAAAEAAIAAAAAAA8AAAAFAAIAAAAAAA8AAAAFAAMAAAAAAA8AAAAFAAQAAAAAAA8AAAAFAAUAAAAAAA8AAAAFAAYAAAAAAA8AAAAFAAcAAAAAAA8AAAAFAAgAAAAAAA8AAAAGAAgAAAAAAA8AAAAGAAcAAAAAAA8AAAAGAAYAAAAAAA8AAAAHAAYAAAAAAA8AAAAHAAUAAAAAAA8AAAAHAAQAAAAAAA8AAAAHAAMAAAAAAA8AAAAHAAIAAAAAAA8AAAAHAAEAAAAAAA8AAAAIAAEAAAAAAA8AAAAIAAIAAAAAAA8AAAAIAAMAAAAAAA8AAAAIAAQAAAAAAA8AAAAIAAUAAAAAAA8AAAAIAAYAAAAAAA8AAAAIAAcAAAAAAA8AAAAHAAcAAAAAAA8AAAAHAAgAAAAAAA8AAAAHAAkAAAAAAA8AAAAIAAkAAAAAAA8AAAAIAAgAAAAAAA8AAAAJAAgAAAAAAA8AAAAJAAcAAAAAAA8AAAAJAAYAAAAAAA8AAAAJAAUAAAAAAA8AAAAJAAQAAAAAAA8AAAAJAAMAAAAAAA8AAAAJAAIAAAAAAA8AAAAJAAEAAAAAAA8AAAAKAAEAAAAAAA8AAAAKAAIAAAAAAA8AAAAKAAQAAAAAAA8AAAAKAAUAAAAAAA8AAAAKAAcAAAAAAA8AAAAKAAgAAAAAAA8AAAAKAAkAAAAAAA8AAAAJAAkAAAAAAA8AAAAJAAoAAAAAAA8AAAAKAAoAAAAAAA8AAAALAAoAAAAAAA8AAAALAAkAAAAAAA8AAAALAAgAAAAAAA8AAAALAAcAAAAAAA8AAAALAAYAAAAAAA8AAAALAAUAAAAAAA8AAAALAAQAAAAAAA8AAAALAAMAAAAAAA8AAAALAAIAAAAAAA8AAAALAAEAAAAAAA8AAAAMAAEAAAAAAA8AAAAMAAIAAAAAAA8AAAAMAAMAAAAAAA8AAAAMAAQAAAAAAA8AAAAMAAUAAAAAAA8AAAAMAAYAAAAAAA8AAAAMAAcAAAAAAA8AAAAMAAgAAAAAAA8AAAAMAAkAAAAAAA8AAAANAAgAAAAAAA8AAAANAAcAAAAAAA8AAAANAAYAAAAAAA8AAAANAAUAAAAAAA8AAAANAAQAAAAAAA8AAAANAAMAAAAAAA8AAAANAAIAAAAAAA8AAAANAAEAAAAAAA8AAAAOAAEAAAAAAA8AAAAOAAIAAAAAAA8AAAAOAAMAAAAAAA8AAAAOAAQAAAAAAA8AAAAOAAUAAAAAAA8AAAAOAAYAAAAAAA8AAAAOAAcAAAAAAA8AAAAOAAgAAAAAAA8AAAAOAAkAAAAAAA8AAAAOAAoAAAAAAA8AAAAPAAoAAAAAAA8AAAAPAAkAAAAAAA8AAAAPAAgAAAAAAA8AAAAPAAcAAAAAAA8AAAAPAAYAAAAAAA8AAAAPAAUAAAAAAA8AAAAPAAQAAAAAAA8AAAAPAAMAAAAAAA8AAAAPAAIAAAAAAA8AAAAPAAEAAAAAAA8AAAAQAAEAAAAAAA8AAAAQAAIAAAAAAA8AAAAQAAMAAAAAAA8AAAAQAAQAAAAAAA8AAAAQAAUAAAAAAA8AAAAQAAYAAAAAAA8AAAAQAAcAAAAAAA8AAAAQAAgAAAAAAA8AAAAQAAkAAAAAAA8AAAAQAAoAAAAAAA8AAAARAAoAAAAAAA8AAAARAAkAAAAAAA8AAAARAAgAAAAAAA8AAAARAAcAAAAAAA8AAAARAAYAAAAAAA8AAAARAAUAAAAAAA8AAAARAAQAAAAAAA8AAAARAAMAAAAAAA8AAAARAAIAAAAAAA8AAAARAAEAAAAAAA8AAAASAAEAAAAAAA8AAAASAAIAAAAAAA8AAAASAAMAAAAAAA8AAAASAAQAAAAAAA8AAAASAAUAAAAAAA8AAAASAAYAAAAAAA8AAAASAAcAAAAAAA8AAAASAAgAAAAAAA8AAAASAAkAAAAAAA8AAAASAAoAAAAAAA8AAAACAAkAAAAAAA8AAAAAAAoAAAAAAA8AAAAAAAsAAAAAAA8AAAABAAsAAAAAAA8AAAACAAsAAAAAAA8AAAADAAsAAAAAAA8AAAAEAAoAAAAAAA8AAAAEAAsAAAAAAA8AAAAFAAoAAAAAAA8AAAAFAAsAAAAAAA8AAAAGAAoAAAAAAA8AAAAGAAsAAAAAAA8AAAAHAAsAAAAAAA8AAAAKAAMAAAAAAA8AAAAKAAYAAAAAAA8AAAAEAAQAAAAAAA8AAAA=")
tile_set = ExtResource("1_1qjuf")

[node name="Props" type="TileMapLayer" parent="Visuals"]
modulate = Color(1, 1, 1, 0.4117647)
tile_map_data = PackedByteArray("AAAAAAAAAAAJABMAAAAAAAEAAAAHABMAAAAAAAgAAAAMABMAAAABAAsAAAALABMAAAACAAsAAAAKABMAAAADAAEAAAAOABMAAAAQAAMAAAAKABMAAAAQAAoAAAAAABMAAAARAAEAAAANABMAAAARAAsAAAAIABMAAAASAAEAAAAMABMAAAASAAgAAAAOABMAAAASAAsAAAANABMAAAATAAIAAAACABMAAAATAAoAAAAAABMAAAA=")
tile_set = ExtResource("1_1qjuf")

[node name="Walls" type="TileMapLayer" parent="Visuals"]
tile_map_data = PackedByteArray("AAAEAAAAAAAAAAEAAAAFAAAAAAABAAEAAAAHAAAAAAABAAEAAAAIAAAAAAABAAEAAAAJAAAAAAABAAEAAAAKAAAAAAABAAEAAAALAAAAAAABAAEAAAANAAAAAAABAAEAAAAOAAAAAAABAAEAAAAPAAAAAAAAAAEAAAAMAAAAAAABAAEAAAAGAAAAAAABAAEAAAAEAAMAAAAAAAEAAAAEAAQAAAAAAAEAAAAEAAUAAAAAAAEAAAAEAAYAAAAAAAEAAAAEAAgAAAABAAEAAAAEAAEAAAAAAAEAAAAEAAIAAAAAAAEAAAAEAAcAAAAAAAEAAAAPAAEAAAAAAAEAAAAPAAIAAAAAAAEAAAAPAAMAAAAAAAEAAAAPAAQAAAAAAAEAAAAPAAUAAAAAAAEAAAAPAAYAAAAAAAEAAAAPAAcAAAAAAAEAAAAPAAgAAAABAAEAAAAFAAgAAAABAAEAAAAGAAgAAAABAAEAAAAHAAgAAAABAAEAAAAIAAgAAAABAAEAAAAJAAgAAAABAAEAAAAKAAgAAAABAAEAAAALAAgAAAABAAEAAAAMAAgAAAABAAEAAAANAAgAAAABAAEAAAAOAAgAAAABAAEAAAAEAAsAAAABAAAAAAAGAAsAAAABAAAAAAAIAAsAAAABAAAAAAAJAAsAAAABAAAAAAAKAAsAAAABAAAAAAAFAAsAAAABAAAAAAAHAAsAAAABAAAAAAAMAAsAAAABAAAAAAANAAsAAAABAAAAAAAPAAsAAAABAAAAAAAOAAsAAAABAAAAAAALAAsAAAABAAAAAAAEAAoAAAAAAAAAAAAPAAoAAAAAAAAAAAA=")
tile_set = ExtResource("1_1qjuf")

[node name="DustParticles" type="GPUParticles2D" parent="Visuals"]
z_index = 99
position = Vector2(320, 180)
amount = 20
texture = ExtResource("2_8trdl")
lifetime = 6.0
process_material = SubResource("ParticleProcessMaterial_asdgj")

[node name="GameArea" type="TileMapLayer" parent="." node_paths=PackedStringArray("unit_grid", "tile_highlighter")]
position = Vector2(160, 32)
tile_map_data = PackedByteArray("AAABAAAAAAAAAAwAAAAAAAEAAAABAAwAAAABAAIAAAAAAAwAAAAAAAMAAAAAAAwAAAABAAQAAAACAAwAAAAAAAUAAAAAAAwAAAABAAYAAAAAAAwAAAACAAEAAAAAAAwAAAACAAMAAAAAAAwAAAACAAUAAAAAAAwAAAADAAAAAAAAAAwAAAADAAIAAAACAAwAAAADAAQAAAACAAwAAAADAAYAAAAAAAwAAAAEAAEAAAAAAAwAAAAEAAMAAAAAAAwAAAAEAAUAAAAAAAwAAAAFAAAAAAABAAwAAAAFAAIAAAAAAAwAAAAFAAQAAAAAAAwAAAAFAAYAAAADAAwAAAAGAAEAAAAAAAwAAAAGAAMAAAAAAAwAAAAGAAUAAAAAAAwAAAAHAAAAAAAAAAwAAAAHAAIAAAADAAwAAAAHAAQAAAAAAAwAAAAHAAYAAAAAAAwAAAAIAAEAAAAAAAwAAAAIAAMAAAAAAAwAAAAIAAUAAAAAAAwAAAAJAAAAAAAAAAwAAAAJAAIAAAAAAAwAAAAJAAQAAAABAAwAAAAJAAYAAAAAAAwAAAA=")
tile_set = ExtResource("1_1qjuf")
script = ExtResource("4_jx0ua")
unit_grid = NodePath("UnitGrid")
tile_highlighter = NodePath("Highlight")
metadata/_edit_lock_ = true
metadata/_edit_group_ = true

[node name="Decor" type="TileMapLayer" parent="GameArea"]
modulate = Color(1, 1, 1, 0.5764706)
tile_map_data = PackedByteArray("AAAHAAUAAAABABYAAAAJAAAAAAABABQAAAACAAIAAAABABYAAAABAAQAAAABABQAAAAAAAYAAAAAABQAAAAAAAEAAAABABUAAAABAAAAAAAAABQAAAAIAAIAAAABABYAAAAJAAMAAAAAABUAAAAJAAUAAAAAABYAAAAEAAAAAAAAABQAAAA=")
tile_set = ExtResource("1_1qjuf")

[node name="Highlight" type="TileMapLayer" parent="GameArea" node_paths=PackedStringArray("play_area")]
visible = false
tile_set = ExtResource("1_1qjuf")
script = ExtResource("5_u52cf")
play_area = NodePath("..")
tile = Vector2i(3, 0)

[node name="UnitGrid" type="Node2D" parent="GameArea"]
script = ExtResource("4_asdgj")
size = Vector2i(4, 7)
metadata/_custom_type_script = "uid://gv28uix4uroc"

[node name="Bench" type="TileMapLayer" parent="." node_paths=PackedStringArray("unit_grid", "tile_highlighter")]
position = Vector2(160, 320)
tile_map_data = PackedByteArray("AAABAAAAAAAAAAsAAAADAAAAAAAAAAsAAAAFAAAAAAAAAAsAAAAHAAAAAAAAAAsAAAAJAAAAAAAAAAsAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAcAAAAEAAAAAAAAAAcAAAAGAAAAAAAAAAcAAAAIAAAAAAAAAAcAAAA=")
tile_set = ExtResource("1_1qjuf")
script = ExtResource("4_jx0ua")
unit_grid = NodePath("UnitGrid")
tile_highlighter = NodePath("Highlight")
metadata/_edit_lock_ = true
metadata/_edit_group_ = true

[node name="Highlight" type="TileMapLayer" parent="Bench" node_paths=PackedStringArray("play_area")]
visible = false
tile_set = ExtResource("1_1qjuf")
script = ExtResource("5_u52cf")
play_area = NodePath("..")
tile = Vector2i(3, 0)

[node name="UnitGrid" type="Node2D" parent="Bench"]
script = ExtResource("4_asdgj")
size = Vector2i(10, 1)
metadata/_custom_type_script = "uid://gv28uix4uroc"

[node name="UnitMover" type="Node" parent="." node_paths=PackedStringArray("play_areas")]
script = ExtResource("8_ii07k")
play_areas = [NodePath("../GameArea"), NodePath("../Bench")]
place_sound = ExtResource("11_wqbss")
game_state = ExtResource("11_gy0qm")
metadata/_custom_type_script = "uid://cg07bdaai08mp"

[node name="UnitSpawner" type="Node" parent="." node_paths=PackedStringArray("bench", "game_area")]
script = ExtResource("11_xgbxb")
bench = NodePath("../Bench")
game_area = NodePath("../GameArea")
game_state = ExtResource("11_gy0qm")
metadata/_custom_type_script = "uid://bmsmmiukuuuh3"

[node name="SceneSpawner" type="Node" parent="UnitSpawner"]
script = ExtResource("11_fir7s")
scene = ExtResource("4_aj7ud")
metadata/_custom_type_script = "uid://7y5rlbikuu2c"

[node name="UnitCombiner" type="Node" parent="." node_paths=PackedStringArray("buffer_timer")]
script = ExtResource("16_t3vx8")
buffer_timer = NodePath("BufferTimer")
combine_sound = ExtResource("13_8kk48")
metadata/_custom_type_script = "uid://cpqf6ti8iqst5"

[node name="BufferTimer" type="Timer" parent="UnitCombiner"]
one_shot = true

[node name="SellPortal" parent="." instance=ExtResource("12_s83md")]
position = Vector2(61, 251)
player_stats = ExtResource("13_fv88w")
unit_pool = ExtResource("15_w4nra")

[node name="UI" type="CanvasLayer" parent="."]

[node name="Shop" parent="UI" instance=ExtResource("14_fv88w")]
unique_name_in_owner = true

[node name="TeamSizeUI" parent="UI" node_paths=PackedStringArray("arena_unit_grid") instance=ExtResource("17_rhjlh")]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -23.0
offset_top = 4.0
offset_right = 23.0
offset_bottom = 28.0
grow_horizontal = 2
arena_unit_grid = NodePath("../../GameArea/UnitGrid")

[node name="Traits" parent="UI" node_paths=PackedStringArray("arena_grid") instance=ExtResource("18_tp84n")]
arena_grid = NodePath("../../GameArea/UnitGrid")
